
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "BindingConfirmationPayload (BC_Payload)",
  "description": "Schema for the payload of a Binding Confirmation (BC) message in ACNBP. Sent by a_prov_candidate to a_req to confirm the binding. This payload is digitally signed.",
  "type": "object",
  "properties": {
    "messageId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this BC message."
    },
    "inReplyToMessageId": {
      "type": "string",
      "format": "uuid",
      "description": "The ID of the SSA message this confirmation is for."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp of when the BC was created."
    },
    "providerAgentId": {
      "type": "string",
      "description": "The ANS name or unique ID of the Provider Agent (now bound)."
    },
    "bindingId": {
      "type": "string",
      "description": "A unique identifier for this specific binding, typically generated by the provider."
    },
    "confirmedCapabilityId": {
      "type": "string",
      "description": "The capability ID that is bound."
    },
    "confirmedSkillSet": {
      "$ref": "acnbp-common.definitions.schema.json#/definitions/SkillSet",
      "description": "The skill set that is bound, as accepted in SSA."
    },
    "confirmedNegotiationContextSnapshot": {
      "$ref": "acnbp-negotiation-context.schema.json",
      "description": "A snapshot of the negotiation context as understood by the provider at the time of binding."
    },
    "confirmedProviderProtocolExtensionSnapshot": {
      "$ref": "acnbp-protocol-extension.schema.json",
      "description": "A snapshot of the provider's ProtocolExtension relevant to this binding."
    },
    "bindingEffectiveFrom": {
        "type": "string",
        "format": "date-time",
        "description": "Timestamp from which the binding is considered active."
    },
    "bindingValidUntil": {
        "type": "string",
        "format": "date-time",
        "description": "Optional: Timestamp until which the binding is valid, if applicable."
    },
    "executionEndpointOverride": {
        "type": "object",
        "properties": {
            "protocol": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
        },
        "description": "Optional: If the execution endpoint is different from what's in the PE, specify here."
    }
  },
  "required": [
    "messageId",
    "inReplyToMessageId",
    "timestamp",
    "providerAgentId",
    "bindingId",
    "confirmedCapabilityId",
    "confirmedSkillSet",
    "bindingEffectiveFrom"
  ]
}
